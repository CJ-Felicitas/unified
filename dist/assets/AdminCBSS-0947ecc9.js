import{_ as w,P as g,D as m,F as D,A as y,B as C,a as A,b as x,r as b,o as p,c as E,d,e as t,w as r,f,g as I,h as R,t as i,p as k,i as O}from"./index-6fcab6bb.js";import{E as N}from"./exceljs.min-acaad0bf.js";g.use(m);const v={name:"AdminCBSS",components:{Footer:D,AdminSidebar:y,BarChart:C,DataTable:g},data(){return{PageTitle:"Community Based Services Section",PageDetail:"Active Admin Dashboard",cbss:[]}},computed:{},mounted(){this.getCbss()},methods:{exportToExcel(){const o=new N.Workbook,a=o.addWorksheet("HRData"),l=["ID","DATE","NAME","AGE","SEX","CASE_CATEGORY","SUB_CATEGORY","MODE_OF_ADMISSION","ADDRESS","NON_MONETARY_SERVICES","Purpose","AMOUNT","REMARKS","REPONSIBLE_PERSON","NUMBER_OF_SERVICES_AVAILED."];a.addRow(l),this.cbss.forEach(e=>{const c=[e.ID,e.DATE,e.NAME,e.AGE,e.SEX,e.CASE_CATEGORY,e.SUB_CATEGORY,e.MODE_OF_ADMISSION,e.ADDRESS,e.NON_MONETARY_SERVICES,e.Purpose,e.AMOUNT,e.REMARKS,e.REPONSIBLE_PERSON,e.NUMBER_OF_SERVICES_AVAILED];a.addRow(c)}),o.xlsx.writeBuffer().then(e=>{const c=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),u=window.URL.createObjectURL(c),_=document.createElement("a");_.href=u,_.download="cbss_data.xlsx",_.click()})},async getCbss(){try{const o=await A.get(`${x}/api/cbsslist`);this.cbss=o.data.Cbss}catch(o){console.error("Error fetching CBSS list:",o)}},async deleteCbss(o){try{if((await this.$swal({title:"Are you sure?",text:"You want to archive this data?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, archive it!",cancelButtonText:"No, keep it"})).isConfirmed)try{const l=await A.delete(`${x}/api/cbsslist/${o}/delete`);await this.$swal({icon:"success",title:"Success!",text:l.data.message}),window.location.reload()}catch(l){l.response?(l.response.status===422&&(this.errorList=l.response.data.errors),l.response.status===404&&await this.$swal({icon:"error",title:"Error!",text:l.response.data.message})):l.request?console.log(l.request):console.log("error",l.message)}}catch(a){console.error("Error with swal:",a)}}}},s=o=>(k("data-v-d846438d"),o=o(),O(),o),T=s(()=>t("br",null,null,-1)),M=s(()=>t("br",null,null,-1)),B=s(()=>t("br",null,null,-1)),L=s(()=>t("br",null,null,-1)),P=s(()=>t("div",{class:"container-fluid wrapper"},null,-1)),U={class:"card card-margin"},Y={class:"card-header",style:{display:"flex"}},F={class:"dropdown"},G=s(()=>t("button",{class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Active ",-1)),V={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},X=s(()=>t("li",null,[t("a",{class:"dropdown-item",href:"#"},"Inactive")],-1)),$=s(()=>t("button",{class:"btn btn-primary float-start",style:{"background-color":"#133f5c","font-size":"12px",padding:"10px 30px 10px 30px","margin-left":"20px"}}," ADD NEW ",-1)),W={class:"card-body"},q=s(()=>t("thead",{style:{background:"#133f5c"},class:"text-white"},[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Age"),t("th",null,"Sex"),t("th",null,"Case Category"),t("th",null,"Mode of Admission"),t("th",null,"Actions")])],-1)),z={class:"actions"},H=s(()=>t("i",{class:"bx bx-low-vision table-icon custom-link"},null,-1)),K=s(()=>t("i",{class:"bx bx-edit icon table-icon"},null,-1)),j=["onClick"],J=s(()=>t("i",{class:"bx bx-history icon table-icon"},null,-1)),Q=s(()=>t("tfoot",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Age"),t("th",null,"Sex"),t("th",null,"Case Category"),t("th",null,"Mode of Admission"),t("th",null,"Actions")])],-1)),Z=s(()=>t("thead",{style:{background:"#133f5c"},class:"text-white"},[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Age"),t("th",null,"Sex"),t("th",null,"Case Category"),t("th",null,"Mode of Admission"),t("th",null,"Actions")])],-1)),tt=s(()=>t("tbody",null,null,-1)),et=s(()=>t("tfoot",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Age"),t("th",null,"Sex"),t("th",null,"Case Category"),t("th",null,"Mode of Admission"),t("th",null,"Actions")])],-1)),st=s(()=>t("br",null,null,-1)),ot=s(()=>t("br",null,null,-1));function lt(o,a,l,e,c,u){const _=b("AdminSidebar"),h=b("router-link"),S=b("DataTable");return p(),E("div",null,[d(_,{iconText:c.PageTitle,iconDetails:c.PageDetail},null,8,["iconText","iconDetails"]),T,M,B,L,P,t("div",U,[t("div",Y,[t("div",F,[G,t("ul",V,[d(h,{to:"/admincbss/archive",style:{"text-decoration":"none"}},{default:r(()=>[X]),_:1})])]),d(h,{to:"/admincbss/create"},{default:r(()=>[$]),_:1}),t("button",{onClick:a[0]||(a[0]=(...n)=>u.exportToExcel&&u.exportToExcel(...n)),class:"btn btn-primary float-end",style:{"background-color":"#0229bf","font-size":"12px",padding:"10px 30px 10px 30px","margin-left":"auto"}}," EXPORT TO EXCEL ")]),t("div",W,[this.cbss.length>0?(p(),f(S,{key:0,style:{width:"100%"},class:"display stripe order-column cell-border hover compact",id:"cbssTable",options:{stateSave:!0,pageLength:8,lengthMenu:[[5,8,10,25,50],[5,8,10,25,50]]}},{default:r(()=>[q,t("tbody",null,[(p(!0),E(I,null,R(c.cbss,n=>(p(),E("tr",{key:n.ID},[t("td",null,i(n.ID),1),t("td",null,i(n.NAME),1),t("td",null,i(n.AGE),1),t("td",null,i(n.SEX),1),t("td",null,i(n.CASE_CATEGORY),1),t("td",null,i(n.MODE_OF_ADMISSION),1),t("td",z,[d(h,{to:{path:"/admincbss/"+n.ID+"/view"},class:"custom-link"},{default:r(()=>[H]),_:2},1032,["to"]),d(h,{to:{path:"/admincbss/"+n.ID+"/edit"},class:"custom-link"},{default:r(()=>[K]),_:2},1032,["to"]),t("i",{onClick:nt=>u.deleteCbss(n.ID),class:"bx bx-archive-in icon table-icon custom-link",style:{cursor:"pointer"}},null,8,j),d(h,{to:{path:"/admincbss/"+n.ID+"/editHistory"},class:"custom-link"},{default:r(()=>[J]),_:2},1032,["to"])])]))),128))]),Q]),_:1})):(p(),f(S,{key:1,style:{width:"100%"},class:"display stripe order-column cell-border hover compact",options:{stateSave:!0,pageLength:8,lengthMenu:[[5,8,10,25,50],[5,8,10,25,50]]}},{default:r(()=>[Z,tt,et]),_:1}))])]),st,ot])}const rt=w(v,[["render",lt],["__scopeId","data-v-d846438d"]]);export{rt as default};
