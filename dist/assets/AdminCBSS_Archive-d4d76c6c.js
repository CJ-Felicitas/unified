import{_ as f,P as x,D as C,F as y,A as D,B as m,a as E,b as A,r as _,o as u,c as h,d as S,e as t,w as p,f as w,g as R,h as I,t as c,p as O,i as T}from"./index-6fcab6bb.js";import{E as N}from"./exceljs.min-acaad0bf.js";x.use(C);const v={name:"AdminCBSS_Archive",components:{Footer:y,AdminSidebar:D,BarChart:m,DataTable:x},data(){return{PageTitle:"Community Based Services Section",PageDetail:"Inactive Admin Dashboard",cbss:[]}},computed:{},mounted(){this.getCbss()},methods:{exportToExcel(){const o=new N.Workbook,a=o.addWorksheet("HRData"),l=["ID","DATE","NAME","AGE","SEX","CASE_CATEGORY","SUB_CATEGORY","MODE_OF_ADMISSION","ADDRESS","NON_MONETARY_SERVICES","Purpose","AMOUNT","REMARKS","REPONSIBLE_PERSON","NUMBER_OF_SERVICES_AVAILED."];a.addRow(l),this.cbss.forEach(e=>{const r=[e.ID,e.DATE,e.NAME,e.AGE,e.SEX,e.CASE_CATEGORY,e.SUB_CATEGORY,e.MODE_OF_ADMISSION,e.ADDRESS,e.NON_MONETARY_SERVICES,e.Purpose,e.AMOUNT,e.REMARKS,e.REPONSIBLE_PERSON,e.NUMBER_OF_SERVICES_AVAILED];a.addRow(r)}),o.xlsx.writeBuffer().then(e=>{const r=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=window.URL.createObjectURL(r),i=document.createElement("a");i.href=d,i.download="cbss_data.xlsx",i.click()})},async getCbss(){try{const o=await E.get(`${A}/api/cbssArchived`);this.cbss=o.data.ArchivedCbss}catch(o){console.error("Error fetching cbss:",o)}},async restoreCbss(o){try{if((await this.$swal({title:"Are you sure?",text:"You want to restore this data?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, restore it!",cancelButtonText:"No, keep it"})).isConfirmed)try{const l=await E.post(`${A}/api/cbssArchived/${o}/restore`);await this.$swal({icon:"success",title:"Success!",text:l.data.message}),window.location.reload()}catch(l){l.response?l.response.status===404&&await this.$swal({icon:"error",title:"Error!",text:l.response.data.message}):l.request?console.log(l.request):console.log("error",l.message)}}catch(a){console.error("Error with swal:",a)}}}},s=o=>(O("data-v-c04562d9"),o=o(),T(),o),k=s(()=>t("br",null,null,-1)),M=s(()=>t("br",null,null,-1)),B=s(()=>t("br",null,null,-1)),P=s(()=>t("br",null,null,-1)),L=s(()=>t("div",{class:"container-fluid wrapper"},null,-1)),U={class:"card card-margin"},Y={class:"card-header",style:{display:"flex"}},F={class:"dropdown"},G=s(()=>t("button",{class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Inactive ",-1)),V={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},X=s(()=>t("li",null,[t("a",{class:"dropdown-item",href:"#"},"Active")],-1)),$={class:"card-body"},q=s(()=>t("thead",{style:{background:"#cb0e16"},class:"text-white"},[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Age"),t("th",null,"Sex"),t("th",null,"Case Category"),t("th",null,"Mode of Admission"),t("th",null,"Actions")])],-1)),K={style:{"text-align":"center"}},W=["onClick"],j=s(()=>t("tfoot",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Age"),t("th",null,"Sex"),t("th",null,"Case Category"),t("th",null,"Mode of Admission"),t("th",null,"Actions")])],-1)),z=s(()=>t("thead",{style:{background:"#cb0e16"},class:"text-white"},[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Age"),t("th",null,"Sex"),t("th",null,"Case Category"),t("th",null,"Mode of Admission"),t("th",null,"Actions")])],-1)),H=s(()=>t("tbody",null,null,-1)),J=s(()=>t("tfoot",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Age"),t("th",null,"Sex"),t("th",null,"Case Category"),t("th",null,"Mode of Admission"),t("th",null,"Actions")])],-1)),Q=s(()=>t("br",null,null,-1)),Z=s(()=>t("br",null,null,-1));function tt(o,a,l,e,r,d){const i=_("AdminSidebar"),g=_("router-link"),b=_("DataTable");return u(),h("div",null,[S(i,{iconText:r.PageTitle,iconDetails:r.PageDetail},null,8,["iconText","iconDetails"]),k,M,B,P,L,t("div",U,[t("div",Y,[t("div",F,[G,t("ul",V,[S(g,{to:"/admincbss",style:{"text-decoration":"none"}},{default:p(()=>[X]),_:1})])]),t("button",{onClick:a[0]||(a[0]=(...n)=>d.exportToExcel&&d.exportToExcel(...n)),class:"btn btn-primary float-end",style:{"background-color":"#0229bf","font-size":"12px",padding:"10px 30px 10px 30px","margin-left":"auto"}}," EXPORT TO EXCEL ")]),t("div",$,[this.cbss.length>0?(u(),w(b,{key:0,style:{width:"100%"},class:"display stripe order-column cell-border hover compact",id:"cbssTable",options:{stateSave:!0,pageLength:5,lengthMenu:[[5,10,25,50],[5,10,25,50]]}},{default:p(()=>[q,t("tbody",null,[(u(!0),h(R,null,I(r.cbss,n=>(u(),h("tr",{key:n.ID},[t("td",null,c(n.ID),1),t("td",null,c(n.NAME),1),t("td",null,c(n.AGE),1),t("td",null,c(n.SEX),1),t("td",null,c(n.CASE_CATEGORY),1),t("td",null,c(n.MODE_OF_ADMISSION),1),t("td",K,[t("i",{style:{cursor:"pointer"},class:"bx bxs-up-arrow-square custom-link",onClick:et=>d.restoreCbss(n.ID)},null,8,W)])]))),128))]),j]),_:1})):(u(),w(b,{key:1,style:{width:"100%"},class:"display stripe order-column cell-border hover compact",id:"hrTable"},{default:p(()=>[z,H,J]),_:1}))])]),Q,Z])}const lt=f(v,[["render",tt],["__scopeId","data-v-c04562d9"]]);export{lt as default};
